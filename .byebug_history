n
c
n
c
n
@sent_requests = @current_user.song_sent_requests
@sent_requests
n
@current_user.song_sent_requests.present?
@current_user.song_sent_requests
@current_user
n
c
@current_user.requester
@current_user.sent_requests
@current_user
n
c
n
c
n
c
n
c
n
c
new_split
n
receiver_split.save
receiver_split.percentage -= requested_percent
receiver_split.percentage
receiver_split = @song_request.song_split
@song_request.song_split
@song_request
n
requested_percent = @song_request.requested_percent
receiver = @song_request.receiver
requester = @song_request.requester
c
@song_request
receiver = @song_request.receiver
requester = @song_request.requester
c
requester
@share_request
n
c
@share_request
@share_request.song_split
n
c
receiver
n
c
@song_request.receiver
@song_request
@current_user
n
c
n
c
@song_request
n
@song_request
c
@song_request
@song_request.receiver == @current_user
c
n
c
n
@share_request
n
c
@song_request.receiver == @current_user
c
@song_request.receiver == @current_user
@song_request.receiver == @current_user.id
@song_request.receiver_id == @current_user.id
n
c
@song_request.receiver
@song_request.receiver == @current_user
n
c
@share_request.receiver_id == @current_user.id
@share_request.receiver_id == @current_user
@current_user
@share_request.receiver_id
ShareRequest.find(params[:id])
@share_request.receiver
@share_request
@share_request = ShareRequest.find(params[:id])
n
params
c
@song_request.receiver_id == @current_user.id
@song_request.artist == @current_user
@song_request.receiver == @current_user
@current_user
@song_request
c
@song_request
n
c
@song_request
n
c
@song_request
@current_user.id
@current_user
n
c
@song_request
@current_user
n
c
n
c
song_request.save!
n
song_request.requester = @song_split.receiver
song_request.requester
@current_user
n
request_params
song_request = SongRequest.new(request_params)
@song_split.present?
c
request_params
@song_split.present?
c
@song.song_split.present?
n
c
@split
n
params
c
params
SongSplit.all
n
c
song_id= self.id
self.id
song = @song
song_id= song.id
song_id= @song.id
song_id= song
song_id= @song
song_id= @song.id
song_id: @song.id
requester_id= artist.id
requester_id: artist.id
receiver_id= artist.id
receiver_id: artist.id
@song
receiver_id
n
c
requester_id
@song
n
c
n
request_params
@song
n
c
request_params
@song
n
c
@split.receiver_id
receiver_id
requester_id
song_request
n
song_request.requester = @current_user
request_params
song_request = @split.song_requests.new(request_params.merge(receiver_id: @split.receiver_id, request_type: @split.split_type))
@split.present?
@split
c
(@split.present? && @split.split_type == 'Song')
if (@split.present? && @split.split_type == 'Song')
@split.split_type
@split.present?
@split
c
@split
c
purchased_splits
n
purchased_splits = @sent_requests.accepted
@sent_requests = @current_user.sent_requests
@current_user.sent_requests.present?
@current_user.sent_requests
n
c
n
purchased_splits
n
@current_user.sent_requests
@current_user
n
c
@current_user.sent_requests.where(status: 'accepted')
@current_user.sent_requests.first
@current_user.sent_requests
@current_user
n
c
@current_user.sent_requests
@current_user
@current_user.sent_requests.present?
n
c
@share_request.update!(status: 'accepted')
c
@share_request
@share_request.update!(status: 'accepted')
c
requester.save!
receiver.save
receiver_split.save!
receiver
receiver_split
c
n
receiver
n
receiver_split
n
requested_percent
requested_percentage
n
receiver
requester = @share_request.requester
n
c
@share_request.split
@share_request.update!(status: 'accepted')
@share_request.update(status: 'accepted')
receiver.save!@share_request.update(status: 'accepted')
n
receiver.save!
receiver_split.save!
nreceiver_split.save!
n
receiver_split.percentage -= requested_percent
receiver_split = receiver.splits.where(split_type: 'Artist').first
requested_percent = @share_request.requested_percent
receiver = @share_request.receiver
requester = @share_request.requester
c
